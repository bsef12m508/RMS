
@{
    
    ViewBag.Title = "AddTrain";
    Layout = "~/Views/Shared/AdminLayout.cshtml";
    List<tclass> list = new List<tclass>();
}
@using RMS.Models;

<script>
    $(function () {
        $("#date").datepicker();
        $('#time').timepicker();
    });
</script>

<script>
    var arr=[];
</script>

<div class="container" style="margin-top:45px; width:40%;  background-color:white">
    <div class="row">
        <div class="col-md-12">
            <form class="form-horizontal" action="add_train" method="POST">
                <fieldset>
                    <div id="legen">
                        <legen class=""><h2>Add Train: </h2></legen>
                    </div>

                    <div class="control-group">
                        <label class="control-label" for="title">Title</label>
                        <div class="controls">
                            <input type="text" id="title" name="title" placeholder="" class="form-control input-lg">
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label" for="destination">Destination</label>
                        <div class="controls">
                            <input type="text" id="destination" name="destination" placeholder="" class="form-control input-lg" required>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label" for="source">Source</label>
                        <div class="controls">
                            <input type="text" id="source" name="source" placeholder="" class="form-control input-lg" required>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label" for="Date">Date</label>
                        <div class="controls">
                            <input type="date" id="date" name="date" placeholder="Pick Date" class="form-control input-lg" required>
                        </div>
                    </div>

                    <div class="control-group">
                        <label class="control-label" for="time">Time</label>
                        <div class="controls">
                            <input type="time" id="time" name="time" placeholder="Pick Time" class="form-control input-lg" required>
                        </div>
                    </div>

                    <div class="control-group">
                        <div class="controls" id="class_label">
                            
                        </div>
                    </div>

                    <!--
                    <div class="control-group">
                        <label class="control-label" for="economy">Add Class</label>
                        <div class="controls" id="class_div">
                            <label>Enter Class Attributes</label>
                            <input type="text" placeholder="Class" class="form-control input-lg" required id="class_title">
                            <input type="text" placeholder="No of seats" class="form-control input-lg" id="class_seats" required>
                            <input type='text' placeholder='Price' class='form-control input-lg' id='class_price' required>
                            <button class="btn btn-success" onclick="AddClass();">Click Here</button>
                        </div>
                    </div>
                        -->
                    <div class="control-group">
                        <!-- Button -->
                        <div class="controls">
                            &nbsp;&nbsp;&nbsp;&nbsp;<br />
                            <button class="btn btn-success"><!--onclick="return Cnfirm()"-->Add</button>
                        </div>
                        <br /><br />
                    </div>
                </fieldset>
            </form>

            <form action="/Home/Save" method="post" enctype="multipart/form-data">

                Upload Image: <input type="file" name="image" />
                <input type="submit" value="upload" />
            </form>
        </div>
    </div>
</div>


<script>

    function TrainClass(title,seats,price)
    {
        this.title = title;
        this.seats = seats;
        this.price = price;
    }

   function AddClass()
   {
       var a = document.getElementById("class_title").value;
       var b = document.getElementById("class_seats").value;
       var c = document.getElementById("class_price").value;

       var obj = new TrainClass(a, b, c);
       arr[arr.length] = obj;
       $("#class_div").empty();
       $('#class_label').append("<br/><br/><label class='control-label'>Class:</label>");
       $('#class_label').append("<label class='control-label'>" + a + "</label><br/>");
       $('#class_label').append("<label class='control-label'>" + b + "</label><br/>");
       $('#class_label').append("<label class='control-label'>" + c + "</label><br/>");
       alert("saofv");

        $('#class_div').append("<br/><br/>");
        $('#class_div').append("<label>Enter Class Attributes</Label>")
        $('#class_div').append('<input type="text" placeholder="Class" class="form-control input-lg"  id="class_title">');
        $('#class_div').append('<input type="text" placeholder="No of seats" class="form-control input-lg" id="class_seats" >');
        $('#class_div').append("<input type='text' placeholder='Price' class='form-control input-lg' id='class_price'>");
        $('#class_div').append('<button class="btn btn-success" onclick="AddClass()">Click Here</button>');
   }

  
</script>

<script>
    function confirm()
    {
        $.ajax({
            contentType:'application/json; charset-utf-8',
            dataType:'json',
            type:'POST',
            url: '/Admin/add_train',
            async:true,
            processData: false,
            cache:false,
            data: JSON.stringify({ClassArr:arr}),
            success: function () { alert("Added."); },
            error: function () {alert("Error.") }
       });
    }

</script>